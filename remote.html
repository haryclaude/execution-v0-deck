<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Speaker Remote</title>
<script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --brand-primary: #D9008D;
    --brand-secondary: #443152;
    --neutral-900: #161021;
    --neutral-800: #352D42;
    --neutral-700: #665E75;
    --neutral-500: #A7A1B2;
    --neutral-300: #D7D3E0;
    --neutral-200: #E8E4F0;
    --neutral-white: #FAF9FC;
    --positive-600: #008043;
    --negative-600: #E01E00;
  }

  html { font-size: 16px; }

  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--neutral-900);
    color: var(--neutral-white);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* ===== CONNECT SCREEN ===== */
  .connect-screen {
    flex: 1; display: flex; flex-direction: column;
    align-items: center; justify-content: center; padding: 2rem;
  }
  .connect-screen.hidden { display: none; }

  .connect-title {
    font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.15em;
    color: var(--brand-primary); font-weight: 700; margin-bottom: 1.5rem;
  }

  .connect-label {
    font-size: 1rem; color: var(--neutral-300); margin-bottom: 1rem; text-align: center;
  }

  .code-input {
    width: 10rem; padding: 0.8rem 1rem; font-size: 1.8rem; font-weight: 700;
    font-family: 'Courier New', monospace; letter-spacing: 0.3em; text-align: center;
    background: var(--neutral-800); border: 2px solid var(--neutral-700);
    border-radius: 10px; color: var(--neutral-white); outline: none;
    -webkit-appearance: none;
  }
  .code-input:focus { border-color: var(--brand-primary); }
  .code-input.error { border-color: var(--negative-600); }

  .connect-btn {
    margin-top: 1.25rem; padding: 0.8rem 2.5rem; font-size: 1rem; font-weight: 700;
    background: var(--brand-primary); color: #fff; border: none; border-radius: 10px;
    cursor: pointer; -webkit-tap-highlight-color: transparent; touch-action: manipulation;
  }
  .connect-btn:disabled { opacity: 0.4; }

  .connect-status {
    margin-top: 1rem; font-size: 0.85rem; color: var(--neutral-500);
    min-height: 1.2rem; text-align: center;
  }
  .connect-status.error { color: var(--negative-600); }

  /* ===== REMOTE SCREEN ===== */
  .remote-screen {
    flex: 1; display: none; flex-direction: column; min-height: 100vh;
  }
  .remote-screen.active { display: flex; }

  .header {
    padding: 1rem 1.25rem 0.75rem;
    border-bottom: 1px solid var(--neutral-800);
    display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;
  }
  .header .label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--brand-primary); font-weight: 700; }
  .header .conn-status { font-size: 0.65rem; color: var(--positive-600); font-weight: 600; display: flex; align-items: center; gap: 0.3rem; }
  .header .conn-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--positive-600); }
  .slide-counter { font-size: 0.85rem; color: var(--neutral-500); font-weight: 600; }

  .progress-bar { height: 3px; background: var(--neutral-800); flex-shrink: 0; }
  .progress-fill { height: 100%; background: var(--brand-primary); transition: width 0.3s ease; }

  .slide-info { flex: 1; overflow-y: auto; padding: 1.25rem; -webkit-overflow-scrolling: touch; }

  .slide-label {
    font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.12em;
    color: var(--brand-primary); font-weight: 600; margin-bottom: 0.5rem;
  }

  .slide-title {
    font-size: 1.3rem; font-weight: 700; color: var(--neutral-white);
    line-height: 1.3; margin-bottom: 1rem; padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--brand-primary);
  }

  .notes-label {
    font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.12em;
    color: var(--neutral-500); font-weight: 700; margin-bottom: 0.75rem;
  }

  .notes-list { list-style: none; }
  .notes-list li {
    font-size: 1.15rem; line-height: 1.5; color: var(--neutral-200); font-weight: 500;
    padding: 0.6rem 0; padding-left: 1.25rem; position: relative;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .notes-list li:last-child { border-bottom: none; }
  .notes-list li::before {
    content: ''; position: absolute; left: 0; top: 1rem;
    width: 7px; height: 7px; border-radius: 50%; background: var(--brand-primary);
  }

  .nav-area {
    flex-shrink: 0; padding: 0.75rem 1.25rem;
    border-top: 1px solid var(--neutral-800); display: flex; gap: 0.75rem;
  }

  .nav-btn {
    flex: 1; padding: 1rem; border-radius: 10px;
    border: 1px solid var(--neutral-700); background: var(--neutral-800);
    color: var(--neutral-white); font-size: 1.1rem; font-weight: 700;
    cursor: pointer; -webkit-tap-highlight-color: transparent; touch-action: manipulation;
    transition: background 0.15s; display: flex; align-items: center; justify-content: center; gap: 0.5rem;
  }
  .nav-btn:active { background: var(--brand-primary); }
  .nav-btn .arrow { font-size: 1.3rem; }

  @supports (padding-bottom: env(safe-area-inset-bottom)) {
    .nav-area { padding-bottom: calc(0.75rem + env(safe-area-inset-bottom)); }
  }
</style>
</head>
<body>

<!-- CONNECT SCREEN -->
<div class="connect-screen" id="connectScreen">
  <div class="connect-title">Speaker Remote</div>
  <div class="connect-label">Enter the 4-digit code from the deck</div>
  <input class="code-input" id="codeInput" type="tel" maxlength="4" inputmode="numeric" pattern="[0-9]*" placeholder="0000" autofocus>
  <button class="connect-btn" id="connectBtn" onclick="connectToDeck()">Connect</button>
  <div class="connect-status" id="connectStatus"></div>
</div>

<!-- REMOTE SCREEN -->
<div class="remote-screen" id="remoteScreen">
  <div class="header">
    <div class="label">Speaker Remote</div>
    <div class="conn-status"><span class="conn-dot"></span> Connected</div>
  </div>

  <div style="display:flex; align-items:center; justify-content:space-between; padding: 0.5rem 1.25rem 0;">
    <div class="slide-counter" id="slideCounter">1 / 10</div>
  </div>

  <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 10%"></div></div>

  <div class="slide-info" id="slideInfo">
    <div class="slide-label" id="slideLabel"></div>
    <div class="slide-title" id="slideTitle"></div>
    <div class="notes-label">Speaker Notes</div>
    <ul class="notes-list" id="notesList"></ul>
  </div>

  <div class="nav-area">
    <button class="nav-btn" onclick="prevSlide()"><span class="arrow">&larr;</span> Prev</button>
    <button class="nav-btn" onclick="requestFullscreen()" id="fsBtn" style="flex:0.6; font-size:0.85rem; background:var(--brand-secondary);">&#9974; Fullscreen</button>
    <button class="nav-btn" onclick="nextSlide()">Next <span class="arrow">&rarr;</span></button>
  </div>
</div>

<script>
  const total = 10;
  let current = 0;
  let conn = null;

  const slideData = [
    {
      label: "Feb 2026 \u00b7 Internal",
      title: "OS-First Execution: From Philosophy to Proof-Point",
      notes: [
        "This shows the OS-first framework in practice \u2014 real execution, real numbers, not theory",
        "Exit OS v0 is the proof-point: what we intended, what happened, what we learned",
        "No decisions expected today \u2014 this is an illustration of the iteration loop working"
      ]
    },
    {
      label: "The Construct",
      title: "The New Way of Working: Codify Execution in the OS First",
      notes: [
        "Foundational shift: from tribal knowledge and escalation to a deterministic rulebook",
        "Same input \u2192 same output, regardless of who executes \u2014 aligned with Satyam and Nishit",
        "The obvious question: doesn\u2019t this slow us down? Next slide answers that"
      ]
    },
    {
      label: "The Framework",
      title: "Velocity with Forcing-Function Decisions: Ship Fast, Learn Fast, Decide Fast",
      notes: [
        "\u2018Why not wait for product?\u2019 \u2014 because we lose weeks of learning. Start people-led, iterate with real data",
        "At v1.5: binary decision \u2014 productize or kill. No third option. No manual process lingers",
        "Ownership is clean: execution owns v0/v1 learning, product owns productization from v1 onward"
      ]
    },
    {
      label: "The Proof-Point",
      title: "Exit OS: Handle Partner Exits Without Chaos",
      notes: [
        "It\u2019s a system, not a conversation \u2014 no discretion, no negotiation, no appeals",
        "Explicit exclusions: no dongles, no re-marketing, no \u2018let\u2019s hear them out\u2019",
        "Primary objective: customer continuity. NOT retention. NOT win-back. Transition, not persuasion"
      ]
    },
    {
      label: "Architecture",
      title: "Four Layers, Strict Boundaries",
      notes: [
        "Layers prevent scope creep \u2014 downstream concerns can\u2019t infect upstream decisions",
        "Comms: templates from Exit OS states. Supply chain: ACSL. Finance: ACSL. Brand: RCRM",
        "Each layer has kill conditions \u2014 if CSL starts reducing churn, it dies"
      ]
    },
    {
      label: "v0 Execution",
      title: "Exit OS v0: 10 Partner Exits, 367 Users, Real Data",
      notes: [
        "Not cherry-picked: 10 real exits, 367 users \u2014 62% in U2 (service ending), not the easy path",
        "Any OS that only handles the happy path fails on the majority of cases",
        "3 notice partners had zero active base \u2014 consumed runway with no customer impact"
      ]
    },
    {
      label: "U1 \u2014 Migration Path",
      title: "The Bottleneck Is Supply, Not Ops",
      notes: [
        "Slot-to-migration success: 90\u2013100% \u2014 migration machinery works fine",
        "G Square bottleneck: only 16% new partner interest \u2014 supply starved the funnel",
        "v1 learning: supply activation is the binding constraint, not execution ops. Saurabh, this is your domain"
      ]
    },
    {
      label: "U2 \u2014 NetBox Recovery Path",
      title: "Process Integrity Determines Outcomes",
      notes: [
        "Clean process (G Square): 62% recovery. Compromised process (Starnet): 15%",
        "Starnet: 80 routers collected outside Wiom process vs 49 agreed \u2014 custody breach",
        "System surfaced this in week 3, not month 6 \u2014 that\u2019s fast iteration doing its job"
      ]
    },
    {
      label: "The Iteration Loop",
      title: "v0 Learnings \u2192 v1 Execution",
      notes: [
        "4 weeks of v0 produced 4 data-backed learnings \u2014 would have been theoretical risks without running it",
        "Supply constraint, custody fragility, pickup SLAs \u2014 each has a specific v1 fix",
        "No decisions needed today \u2014 showing the iteration loop producing real refinement"
      ]
    },
    {
      label: "The Bigger Picture",
      title: "This Is How Every OS Will Evolve",
      notes: [
        "Exit OS is the first proof-point \u2014 same loop applies to every OS we build",
        "Speed of learning > perfection of v0 \u2014 v0 is designed to surface reality fast",
        "v1.5 forcing function: productize or kill. Nothing stays manual forever"
      ]
    }
  ];

  function updateUI() {
    const s = slideData[current];
    document.getElementById('slideLabel').textContent = s.label;
    document.getElementById('slideTitle').textContent = s.title;
    document.getElementById('slideCounter').textContent = (current + 1) + ' / ' + total;
    document.getElementById('progressFill').style.width = ((current + 1) / total * 100) + '%';
    var list = document.getElementById('notesList');
    list.innerHTML = '';
    s.notes.forEach(function(note) {
      var li = document.createElement('li');
      li.textContent = note;
      list.appendChild(li);
    });
    document.getElementById('slideInfo').scrollTop = 0;
  }

  function showSlide(n, broadcast) {
    if (broadcast === undefined) broadcast = true;
    current = Math.max(0, Math.min(n, total - 1));
    updateUI();
    if (broadcast && conn && conn.open) {
      conn.send({ slide: current });
    }
  }

  function nextSlide() { showSlide(current + 1); }
  function prevSlide() { showSlide(current - 1); }

  // Connect to deck
  function connectToDeck() {
    const code = document.getElementById('codeInput').value.trim();
    if (code.length !== 4 || !/^\d{4}$/.test(code)) {
      document.getElementById('codeInput').classList.add('error');
      document.getElementById('connectStatus').textContent = 'Enter a 4-digit code';
      document.getElementById('connectStatus').classList.add('error');
      return;
    }

    document.getElementById('connectBtn').disabled = true;
    document.getElementById('connectStatus').textContent = 'Connecting...';
    document.getElementById('connectStatus').classList.remove('error');
    document.getElementById('codeInput').classList.remove('error');

    const peer = new Peer({ debug: 0 });

    peer.on('open', function() {
      conn = peer.connect('deck-' + code, { reliable: true });

      conn.on('open', function() {
        document.getElementById('connectScreen').classList.add('hidden');
        document.getElementById('remoteScreen').classList.add('active');
        updateUI();
      });

      conn.on('data', function(data) {
        if (typeof data.slide === 'number') {
          showSlide(data.slide, false);
        }
      });

      conn.on('close', function() {
        document.getElementById('connectScreen').classList.remove('hidden');
        document.getElementById('remoteScreen').classList.remove('active');
        document.getElementById('connectBtn').disabled = false;
        document.getElementById('connectStatus').textContent = 'Disconnected. Reconnect?';
        conn = null;
      });

      conn.on('error', function(err) {
        document.getElementById('connectBtn').disabled = false;
        document.getElementById('connectStatus').textContent = 'Connection error. Try again.';
        document.getElementById('connectStatus').classList.add('error');
      });

      // Timeout if no connection after 8 seconds
      setTimeout(function() {
        if (!conn || !conn.open) {
          document.getElementById('connectBtn').disabled = false;
          document.getElementById('connectStatus').textContent = 'Could not connect. Check the code.';
          document.getElementById('connectStatus').classList.add('error');
        }
      }, 8000);
    });

    peer.on('error', function(err) {
      document.getElementById('connectBtn').disabled = false;
      document.getElementById('connectStatus').textContent = 'Error: ' + err.type + '. Try again.';
      document.getElementById('connectStatus').classList.add('error');
    });
  }

  // Enter key to connect
  document.getElementById('codeInput').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') connectToDeck();
    this.classList.remove('error');
  });

  // Auto-select input text on focus
  document.getElementById('codeInput').addEventListener('focus', function() { this.select(); });

  // Request fullscreen on the main deck
  function requestFullscreen() {
    if (conn && conn.open) {
      conn.send({ action: 'fullscreen' });
    }
  }

  // Keyboard nav (when connected)
  document.addEventListener('keydown', function(e) {
    if (!conn || !conn.open) return;
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
    if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
  });

  // Swipe nav
  let touchStartX = 0;
  document.addEventListener('touchstart', function(e) { touchStartX = e.touches[0].clientX; });
  document.addEventListener('touchend', function(e) {
    if (!conn || !conn.open) return;
    const diff = touchStartX - e.changedTouches[0].clientX;
    if (Math.abs(diff) > 50) { diff > 0 ? nextSlide() : prevSlide(); }
  });
</script>
</body>
</html>
